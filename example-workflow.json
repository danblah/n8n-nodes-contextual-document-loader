{
  "name": "Contextual Document Loader Example",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "text": "ACME Corporation Q2 2023 Financial Report\n\nExecutive Summary\nACME Corporation experienced strong growth in Q2 2023, driven by increased demand for our cloud services and enterprise solutions.\n\nRevenue Performance\nThe company's revenue grew by 3% over the previous quarter, reaching $314 million. This growth was primarily attributed to our SaaS offerings, which saw a 15% increase in subscriptions.\n\nProduct Performance\nOur flagship product, ACME Cloud Suite, maintained its market leadership position with over 10,000 enterprise customers. The newly launched ACME Analytics platform contributed $12 million in revenue.\n\nOperating Expenses\nOperating expenses increased by 2% to $210 million, mainly due to investments in R&D and marketing initiatives. Despite this increase, we maintained a healthy operating margin of 33%.\n\nFuture Outlook\nLooking ahead to Q3 2023, we expect continued growth momentum with projected revenue of $325-330 million. Key growth drivers include expansion into Asian markets and the launch of our AI-powered features."
      },
      "id": "set-document",
      "name": "Set Document",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "model": "gpt-3.5-turbo"
      },
      "id": "openai-chat",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [650, 400],
      "credentials": {
        "openAiApi": {
          "id": "1",
          "name": "OpenAI"
        }
      }
    },
    {
      "parameters": {
        "textSplitter": "recursiveCharacterTextSplitter",
        "chunkSize": 200,
        "chunkOverlap": 50,
        "options": {
          "enableContextualRetrieval": true,
          "contextPrompt": "<document>\n{{WHOLE_DOCUMENT}}\n</document>\n\nHere is the chunk we want to situate within the whole document:\n<chunk>\n{{CHUNK_CONTENT}}\n</chunk>\n\nPlease give a short succinct context to situate this chunk within the overall document for the purposes of improving search retrieval of the chunk. Answer only with the succinct context and nothing else.",
          "batchSize": 5
        }
      },
      "id": "contextual-loader",
      "name": "Contextual Document Loader",
      "type": "n8n-nodes-contextual-document-loader.contextualDocumentLoader",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "model": "text-embedding-004",
        "options": {}
      },
      "id": "embeddings",
      "name": "Embeddings Google Gemini",
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [1050, 400],
      "credentials": {
        "googlePalmApi": {
          "id": "2",
          "name": "Google PaLM"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert"
      },
      "id": "vector-store",
      "name": "In-Memory Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1,
      "position": [1250, 300]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Set Document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Document": {
      "main": [
        [
          {
            "node": "Contextual Document Loader",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Contextual Document Loader",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Contextual Document Loader": {
      "ai_document": [
        [
          {
            "node": "In-Memory Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini": {
      "ai_embedding": [
        [
          {
            "node": "In-Memory Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  }
} 